(this["webpackJsonpbookingzone-react"]=this["webpackJsonpbookingzone-react"]||[]).push([[0],{39:function(e,a,t){e.exports=t(75)},44:function(e,a,t){},45:function(e,a,t){},67:function(e,a,t){},69:function(e,a,t){},75:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),o=t(22),l=t.n(o),r=(t(44),t(18)),c=t(13),s=t(6),m=t(7),d=t(10),u=t(8),h=t(1),g=t(9),b=(t(45),t(14)),v=t.n(b),p=t(12),k=t(35),f=t.n(k),E="http://localhost:3000/api/";function C(e,a,t){var n;"fail"===t&&(n="#f5571d"),"success"===t&&(n="#25b864"),f.a.show({title:a,message:e,backgroundColor:n,position:"topCenter"})}var y=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).state={username:"",password:"",redirect:!1},t.handleUsernameChange=t.handleUsernameChange.bind(Object(h.a)(t)),t.handlePasswordChange=t.handlePasswordChange.bind(Object(h.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(h.a)(t)),t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault();var t=this.state.username,n=this.state.password;v.a.post(E+"login/",{username:t,password:n}).then((function(e){var t=e.data;1===t.status?((new p.a).set("uid",t.user._id,{path:"/"}),a.setState({redirect:!0})):C(t.msg,"","fail")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(!0===this.state.redirect)return i.a.createElement(c.a,{to:"/dashboard"});var e=new p.a;return"undefined"!==typeof e.get("uid")&&""!==e.get("uid")?i.a.createElement(c.a,{to:"/dashboard"}):i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"col align-self-center login_page_heading"},i.a.createElement("h2",null,"Booking Zone"),i.a.createElement("h4",null,"All your facility booking now a click away!")),i.a.createElement("div",{className:"login_form_wrapper"},i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("h4",{className:"form_heading"},"Login"),i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{id:"username",type:"text",className:"form-control",placeholder:"Enter username",required:!0,autoComplete:"off",onChange:this.handleUsernameChange})),i.a.createElement("div",{className:"form-group"},i.a.createElement("input",{id:"password",type:"password",className:"form-control",placeholder:"Enter password",required:!0,autoComplete:"off",onChange:this.handlePasswordChange})),i.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))))}}]),a}(i.a.Component),N=(t(67),t(34),function(e){function a(e){var t;Object(s.a)(this,a),t=Object(d.a)(this,Object(u.a)(a).call(this,e));var n=new p.a;return t.state={uid:n.get("uid"),booking_date:S(),event:"TENNIS",starttime:9,endtime:10,redirectToMyBooking:!1},t.HandleCheckChange=t.HandleCheckChange.bind(Object(h.a)(t)),t.HandleDateChange=t.HandleDateChange.bind(Object(h.a)(t)),t.HandleStartTimeChange=t.HandleStartTimeChange.bind(Object(h.a)(t)),t.HandleEndTimeChange=t.HandleEndTimeChange.bind(Object(h.a)(t)),t.HandleSubmit=t.HandleSubmit.bind(Object(h.a)(t)),t.HandleMyBookingClick=t.HandleMyBookingClick.bind(Object(h.a)(t)),t.HandleLogoutClick=t.HandleLogoutClick.bind(Object(h.a)(t)),t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"HandleCheckChange",value:function(e){this.setState({event:e.target.value})}},{key:"HandleDateChange",value:function(e){this.setState({booking_date:e})}},{key:"HandleStartTimeChange",value:function(e){this.setState({starttime:e})}},{key:"HandleEndTimeChange",value:function(e){this.setState({endtime:e})}},{key:"HandleMyBookingClick",value:function(e){this.setState({redirectToMyBooking:!0})}},{key:"HandleSubmit",value:function(e){if(e.preventDefault(),"undefined"!==typeof this.state.starttime&&"undefined"!==typeof this.state.endtime&&"undefined"!==typeof this.state.booking_date&&this.state.booking_date.length>0){var a=this.state.starttime,t=this.state.endtime,n=Math.floor((new Date).getTime()/1e3);if(a>t)return void C("The start time is after end time. Please select a proper start time","","fail");if(a===t)return void C("Start time cannot be same with end time. Please select a proper start and end time","","fail");var i=t-a+" hrs",o=new Date(this.state.booking_date),l=o.setHours(a,0,0,0)/1e3,r=o.setHours(t,0,0,0)/1e3;if(n>l||n>r)return void C("Please select day as today or some upcoming day","","fail");var c=this.state.uid,s=this.state.event;v.a.post(E+"bookings/new/",{uid:c,starttime:l,endtime:r,event:s,period:i}).then((function(e){var a=e.data;1===a.status&&C(a.msg,"","success"),0===a.status&&C(a.msg,"","fail")})).catch((function(e){console.log(e)}))}else C("Please select proper date and timings","","fail")}},{key:"HandleLogoutClick",value:function(e){(new p.a).remove("uid",{path:"/"}),this.setState({uid:""})}},{key:"render",value:function(){return!0===this.state.redirectToMyBooking?i.a.createElement(c.a,{to:"/dashboard/my-booking"}):"undefined"===typeof this.state.uid||""===this.state.uid?i.a.createElement(c.a,{to:"/login"}):i.a.createElement("div",null,i.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},i.a.createElement("span",{className:"navbar-brand mb-0 h1"},"BookingZone"),i.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("span",{className:"navbar-toggler-icon"})),i.a.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent"},i.a.createElement("div",{className:"navbar-nav"},i.a.createElement("div",{className:"nav-item nav-link",onClick:this.HandleMyBookingClick},"My Bookings"),i.a.createElement("div",{className:"nav-item nav-link",onClick:this.HandleLogoutClick},"Logout")))),i.a.createElement("div",{className:"dashboard_container container"},i.a.createElement("h3",{className:"intro_msg display-4"},"What would you like to book today?"),i.a.createElement("div",{className:"booking_wrapper"},i.a.createElement("form",{onSubmit:this.HandleSubmit},i.a.createElement("div",{className:"activity_wrapper"},i.a.createElement("h4",null,"Activities "),i.a.createElement("div",{className:"activity_select_wrapper"},i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",type:"radio",name:"activity",value:"TENNIS",checked:"TENNIS"===this.state.event,onChange:this.HandleCheckChange,id:"activity1"}),i.a.createElement("label",{className:"form-check-label",htmlFor:"activity1"},"Tennis Court")),i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",type:"radio",name:"activity",value:"SWIMMING",checked:"SWIMMING"===this.state.event,onChange:this.HandleCheckChange,id:"activity2"}),i.a.createElement("label",{className:"form-check-label",htmlFor:"activity2"},"Swimming Pool")),i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",type:"radio",name:"activity",value:"BADMINTON",checked:"BADMINTON"===this.state.event,onChange:this.HandleCheckChange,id:"activity3"}),i.a.createElement("label",{className:"form-check-label",htmlFor:"activity3"},"Badminton")),i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",type:"radio",name:"activity",value:"GYM",checked:"GYM"===this.state.event,onChange:this.HandleCheckChange,id:"activity4"}),i.a.createElement("label",{className:"form-check-label",htmlFor:"activity4"},"Gym")),i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",type:"radio",name:"activity",value:"CLUBHOUSE",checked:"CLUBHOUSE"===this.state.event,onChange:this.HandleCheckChange,id:"activity5"}),i.a.createElement("label",{className:"form-check-label",htmlFor:"activity5"},"Club House")),i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"form-check-input",type:"radio",name:"activity",value:"CYCLE",checked:"CYCLE"===this.state.event,onChange:this.HandleCheckChange,id:"activity6"}),i.a.createElement("label",{className:"form-check-label",htmlFor:"activity6"},"Cycle Track")))),i.a.createElement("div",{className:"time_selector_wrapper"},i.a.createElement("h4",null,"Day and Time"),i.a.createElement("div",{className:"time_selector"},i.a.createElement(H,{bookingDate:this.state.booking_date,onDateChange:this.HandleDateChange}),i.a.createElement(w,{startTime:this.state.starttime,onStartTimeChange:this.HandleStartTimeChange}),i.a.createElement(O,{endTime:this.state.endtime,onEndTimeChange:this.HandleEndTimeChange}))),i.a.createElement("div",{className:"confirm_booking_wrapper"},i.a.createElement("button",{type:"submit",className:"btn btn-primary booking_submit"},"Confirm Booking"))))))}}]),a}(i.a.Component)),H=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).HandleBookingDateChange=t.HandleBookingDateChange.bind(Object(h.a)(t)),t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"HandleBookingDateChange",value:function(e){this.props.onDateChange(e.target.value)}},{key:"render",value:function(){return i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"booking_day"},"Booking Day"),i.a.createElement("input",{className:"form-control",type:"date",id:"booking_day",value:this.props.bookingDate,onChange:this.HandleBookingDateChange}))}}]),a}(i.a.Component),w=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).HandleStartTimeChange=t.HandleStartTimeChange.bind(Object(h.a)(t)),t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"HandleStartTimeChange",value:function(e){this.props.onStartTimeChange(e.target.value)}},{key:"render",value:function(){for(var e=[],a=((new Date).getHours(),9);a<=21;a++)e.push(i.a.createElement(j,{counter:a,am_pm:a>=12?"P.M.":"A.M."}));return i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"starttime"},"Start Time"),i.a.createElement("select",{className:"form-control",id:"starttime",value:this.props.startTime,onChange:this.HandleStartTimeChange},e))}}]),a}(i.a.Component),O=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).HandleEndTimeChange=t.HandleEndTimeChange.bind(Object(h.a)(t)),t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"HandleEndTimeChange",value:function(e){this.props.onEndTimeChange(e.target.value)}},{key:"render",value:function(){for(var e=[],a=10;a<=22;a++)e.push(i.a.createElement(j,{counter:a}));return i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"endtime"},"End Time"),i.a.createElement("select",{className:"form-control",id:"endtime",value:this.props.endTime,onChange:this.HandleEndTimeChange},e))}}]),a}(i.a.Component);function j(e){return i.a.createElement("option",{value:e.counter,key:e.counter},e.counter,":00 ")}function S(){var e=new Date;e.getHours()>22&&e.setDate(e.getDate()+1);var a=e.getDate(),t=e.getMonth()+1,n=e.getFullYear();return a<10&&(a="0"+a),t<10&&(t="0"+t),e=n+"-"+t+"-"+a}var T=N,_=t(38),B=(t(68),t(69),t(70)),D=function(e){function a(e){var t;Object(s.a)(this,a),t=Object(d.a)(this,Object(u.a)(a).call(this,e));var n=new p.a;return t.state={uid:n.get("uid"),redirectToDashboard:!1,bookings:[]},t.HandleNewBookingClick=t.HandleNewBookingClick.bind(Object(h.a)(t)),t.HandleLogoutClick=t.HandleLogoutClick.bind(Object(h.a)(t)),t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"HandleNewBookingClick",value:function(e){this.setState({redirectToDashboard:!0})}},{key:"componentDidMount",value:function(){var e=this;v.a.post(E+"bookings/user/",{uid:this.state.uid}).then((function(a){e.setState({bookings:a.data.bookings}),console.log(a)})).catch((function(e){alert("Cannot connect to server"),console.log(e)}))}},{key:"HandleLogoutClick",value:function(e){(new p.a).remove("uid",{path:"/"}),this.setState({uid:""})}},{key:"render",value:function(){return this.state.redirectToDashboard?i.a.createElement(c.a,{to:"/dashboard"}):"undefined"===typeof this.state.uid||""===this.state.uid?i.a.createElement(c.a,{to:"/login"}):i.a.createElement("div",null,i.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},i.a.createElement("span",{className:"navbar-brand mb-0 h1"},"BookingZone"),i.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("span",{className:"navbar-toggler-icon"})),i.a.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent"},i.a.createElement("div",{className:"navbar-nav"},i.a.createElement("div",{className:"nav-item nav-link",onClick:this.HandleNewBookingClick},"New Booking"),i.a.createElement("div",{className:"nav-item nav-link",onClick:this.HandleLogoutClick},"Logout")))),this.state.bookings.length?i.a.createElement("div",{className:"mybooking_container container"},i.a.createElement(M,{bookings:this.state.bookings}),i.a.createElement(I,{bookings:this.state.bookings})):i.a.createElement("div",{className:"empty_bookings"},"No Bookings Found!",i.a.createElement("br",null),"Go to New Bookings and make your first Booking!"))}}]),a}(i.a.Component);function M(e){for(var a=Math.floor((new Date).getTime()/1e3),t=[],n=0;n<e.bookings.length;n++){var o=e.bookings[n];o.starttime>a&&t.push(i.a.createElement(L,{past:"",booking_id:o._id,event:o.event,day:B.unix(parseInt(o.starttime)).format("Do MMM YYYY"),starttime:B.unix(parseInt(o.starttime)).format("hh:mm A"),endtime:B.unix(parseInt(o.endtime)).format("hh:mm A")}))}return t.length>0?i.a.createElement("div",{className:"upcoming_bookings_wrapper"},i.a.createElement("h3",null,"Upcoming Bookings"),t):null}function I(e){for(var a=Math.floor((new Date).getTime()/1e3),t=[],n=0;n<e.bookings.length;n++){var o=e.bookings[n];o.starttime<a&&t.push(i.a.createElement(L,{past:"past",booking_id:o._id,event:o.event,day:B.unix(parseInt(o.starttime)).format("Do MMM YYYY"),starttime:B.unix(parseInt(o.starttime)).format("hh:mm A"),endtime:B.unix(parseInt(o.endtime)).format("hh:mm A")}))}return t.length>0?i.a.createElement("div",{className:"past_bookings"},i.a.createElement("h3",null,"Past Bookings"),t):null}function L(e){return i.a.createElement("div",{className:"booking_wrapper "+e.past,"data-booking-id":e.booking_id},i.a.createElement("div",{className:"event"},"Event : ",i.a.createElement("span",{className:"event_name"},e.event)),i.a.createElement("div",{className:"day_wrapper"},"Day : ",i.a.createElement("span",{className:"day"},e.day," ")),i.a.createElement("div",{className:"time_wrapper"},"Time : ",i.a.createElement("span",{className:"time"},i.a.createElement("span",{className:"starttime"},e.starttime)," To ",i.a.createElement("span",{className:"endtime"},e.endtime))),function(e,a){if(!e)return i.a.createElement(Y,{booking_id:a})}(e.past,e.booking_id))}var Y=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).HandleCancelClick=t.HandleCancelClick.bind(Object(h.a)(t)),t}return Object(g.a)(a,e),Object(m.a)(a,[{key:"HandleCancelClick",value:function(e){var a=this;Object(_.confirmAlert)({title:"Confirm to cancel booking",message:"Are you sure to do this?",buttons:[{label:"Yes",onClick:function(){v.a.post(E+"bookings/cancel/",{booking_id:a.props.booking_id}).then((function(e){var a=e.data;1===a.status&&(C(a.msg,"","success"),window.location.reload()),0===a.status&&alert(a.msg)})).catch((function(e){console.log(e)}))}},{label:"No"}]})}},{key:"render",value:function(){return i.a.createElement("div",{className:"cancel_booking float-right",onClick:this.HandleCancelClick},"Cancel Booking")}}]),a}(i.a.Component);var x=D;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(72),t(74);l.a.render(i.a.createElement((function(){return i.a.createElement(r.a,null,i.a.createElement("div",null,i.a.createElement(c.d,null,i.a.createElement(c.b,{exact:!0,path:"/dashboard",component:T},i.a.createElement(T,null)),i.a.createElement(c.b,{path:"/dashboard/my-booking",component:x},i.a.createElement(x,null)),i.a.createElement(c.b,{path:"/login",component:y},i.a.createElement(y,null)),i.a.createElement(c.b,{path:"/",component:y},i.a.createElement(y,null)))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.23cb2b9a.chunk.js.map